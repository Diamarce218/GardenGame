<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Grid Garden - A game for learning JavaScript</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href='https://fonts.googleapis.com/css?family=PT+Sans|Autour+One|Source+Code+Pro' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <section id="sidebar">
    <div class="header">
      <div>
        <h1 class="title">Playground</h1>
      </div>
    </div>
    <div id="instructions">
      <p>Controls</p>
      <button id="water" class="control">Water</button>
      <button id="poison" class="control">Poison</button>
    </div>
  </section>
  <section id="view">
    <div id="board">
      <div id="overlay">
        <span class="plot" id="0"></span>
        <span class="plot" id="1"></span>
        <span class="plot" id="2"></span>
        <span class="plot" id="3"></span>
        <span class="plot" id="4"></span>
        <span class="plot" id="5"></span>
        <span class="plot" id="6"></span>
        <span class="plot" id="7"></span>
        <span class="plot" id="8"></span>
        <span class="plot" id="9"></span>
        <span class="plot" id="10"></span>
        <span class="plot" id="11"></span>
        <span class="plot" id="12"></span>
        <span class="plot" id="13"></span>
        <span class="plot" id="14"></span>
        <span class="plot" id="15"></span>
        <span class="plot" id="16"></span>
        <span class="plot" id="17"></span>
        <span class="plot" id="18"></span>
        <span class="plot" id="19"></span>
        <span class="plot" id="20"></span>
        <span class="plot" id="21"></span>
        <span class="plot" id="22"></span>
        <span class="plot" id="23"></span>
        <span class="plot" id="24"></span>
      </div>
      <div id="plants">
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
      </div>
      <div id="garden">
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
      </div>
      <div id="soil">
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
        <span class="plot"></span>
      </div>
    </div>
  </section>
  <script>
    // obtiene todos los elementos y los almacena en variables
    const overlay = document.getElementById('overlay');
    const plants = document.getElementById('plants');
    const garden = document.getElementById('garden');
    const water = document.getElementById('water');
    const poison = document.getElementById('poison');
    let selection;

    // funciÃ³n que crea el elemento que se va a plantar
    function createGardenElement(type) {
      const element = document.createElement('img');
      element.setAttribute('src', `images/${type}.svg`);
      element.setAttribute('width', '100%');
      element.setAttribute('class', type);
      return element;
    }

    // EVENTO CLICK
    overlay.addEventListener('click', (event) => {
      if (selection) {
        // obtiene el plot en el que se hace click
        let position = parseInt(event.target.getAttribute('id'));
        //obtiene el valor selection de los botones water y poison llama funcion crear elemento
        let element = createGardenElement(selection); 
        //limpia el plot antes de agregar el elemento a sembrar, para no sobreescribir 
        garden.children[position].innerHTML = '';
        //agrega el elemento creado con la funcion
        garden.children[position].appendChild(element);
      }
    });
    water.addEventListener('click', (event) => {
      selection = 'water';
      // seleccionar y deseleccionar botones
      water.classList.add('selected');
      poison.classList.remove('selected');
    });
    poison.addEventListener('click', (event) => {
      selection = 'poison';
      // seleccionar y deseleccionar botones
      poison.classList.add('selected');
      water.classList.remove('selected');
    });
  </script>
</body>

</html>